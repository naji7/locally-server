generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mongodb"
  url      = env("DATABASE_URL")
}

model User {
  id                 String               @id @default(auto()) @map("_id") @db.ObjectId
  fullName           String
  teleNo             String               @unique
  email              String               @unique
  password           String
  affiliateId        String
  role               String               @default("USER")  // USER, ADMIN
  createdAt          DateTime             @default(now())
  updatedAt          DateTime             @updatedAt
  subscriptionPlan   SubscriptionPlan     @relation(fields: [subId], references: [id])
  subId              String               @db.ObjectId
  subsciption        Subscription[]
}

model SubscriptionPlan {
  id                 String        @id @default(auto()) @map("_id") @db.ObjectId
  tier               String
  entries            String
  oldEntries         String
  monthlyPrice       String?
  semiAnnualPrice    String?
  annualPrice        String?
  features           String[]
  background         String
  main               String
  priceIdMonth       String
  priceIdSemiAnnual  String
  priceIdAnnual      String
  createdAt          DateTime      @default(now())
  updatedAt          DateTime      @updatedAt
  status             String        @default("ACTIVE")  // ACTIVE, INACTIVE
  users              User[]
}

model Subscription {
  id                 String        @id @default(auto()) @map("_id") @db.ObjectId
  user               User          @relation(fields: [userId], references: [id])
  userId             String        @db.ObjectId
  durationType       String
  status             String        @default("ACTIVE")  // ACTIVE, INACTIVE
  createdAt          DateTime      @default(now())
  updatedAt          DateTime      @updatedAt
  endsAt             DateTime
  isPaymentVerified  Boolean       @default(false)
}

model Verification {
  id                 String        @id @default(auto()) @map("_id") @db.ObjectId
  email              String        @unique
  otp                Int           @unique
  createdAt          DateTime      @default(now())
  expireAt           DateTime      
}

model Raffle {
  id                 String        @id @default(auto()) @map("_id") @db.ObjectId
  name               String
  type               String
}

model Coupon {
  id                 String        @id @default(auto()) @map("_id") @db.ObjectId
  name               String
  coupen             String
  description        String
  createdAt          DateTime      @default(now())
  updatedAt          DateTime      @updatedAt
}